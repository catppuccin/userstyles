/* ==UserStyle==
@name Google Contacts Catppuccin
@namespace github.com/catppuccin/userstyles/styles/google-contacts
@homepageURL https://github.com/catppuccin/userstyles/tree/main/styles/google-contacts
@version 2000.01.01
@updateURL https://github.com/catppuccin/userstyles/raw/main/styles/google-contacts/catppuccin.user.less
@supportURL https://github.com/catppuccin/userstyles/issues?q=is%3Aopen+is%3Aissue+label%3Agoogle-contacts
@description Soothing pastel theme for Google Contacts
@author Catppuccin
@license MIT

@preprocessor less
@var select lightFlavor "Light Flavor" ["latte:Latte*", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha"]
@var select darkFlavor "Dark Flavor" ["latte:Latte", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha*"]
@var select accentColor "Accent" ["rosewater:Rosewater", "flamingo:Flamingo", "pink:Pink", "mauve:Mauve*", "red:Red", "maroon:Maroon", "peach:Peach", "yellow:Yellow", "green:Green", "teal:Teal", "blue:Blue", "sapphire:Sapphire", "sky:Sky", "lavender:Lavender", "subtext0:Gray"]
==/UserStyle== */

@import "https://userstyles.catppuccin.com/lib/lib.less";

// @import "https://userstyles.catppuccin.com/lib/m3.less";
@import "https://github.com/catppuccin/userstyles/raw/refs/heads/feat/m3-lib/lib/m3.less";

@-moz-document domain("contacts.google.com") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }
    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();

    #__m3.base();
    #__m3.with-prefix(gm3-sys-color-);
    #__m3.with-prefix(pkw-);

    // For companion panel
    body:not([cz-shortcut-listen="true"]) {
      background: var(--gm3-sys-color-surface);
      color: var(--gm3-sys-color-on-surface);
    }
    
    a {
      color: var(--gm3-sys-color-primary)
    }
    
    --gm-fillbutton-container-color: cyan;
    --gm-fillbutton-ink-color: cyan;
    --gm-fillbutton-disabled-container-color: cyan;
    --gm-fillbutton-disabled-ink-color: cyan;
    --gm-fillbutton-state-color: cyan;
    --gm-fillbutton-keyshadow-color: cyan;
    --gm-fillbutton-ambientshadow-color: cyan;

    --gm-hairlinebutton-ink-color: cyan;
    --gm-hairlinebutton-outline-color: cyan;
    --gm-hairlinebutton-outline-color--stateful: cyan;
    --gm-hairlinebutton-disabled-ink-color: cyan;
    --gm-hairlinebutton-disabled-outline-color: cyan;
    --gm-hairlinebutton-ink-color--stateful: cyan;
    --gm-hairlinebutton-state-color: cyan;

    --gm-protectedbutton-keyshadow-color: cyan;
    --gm-protectedbutton-ambientshadow-color: cyan;
    --gm-protectedbutton-container-color: cyan;
    --gm-protectedbutton-ink-color: cyan;
    --gm-protectedbutton-disabled-container-color: cyan;
    --gm-protectedbutton-disabled-ink-color: cyan;
    --gm-protectedbutton-ink-color--stateful: cyan;
    --gm-protectedbutton-state-color: cyan;

    --gm-colortextbutton-ink-color: cyan;
    --gm-colortextbutton-disabled-ink-color: cyan;
    --gm-colortextbutton-ink-color--stateful: cyan;
    --gm-colortextbutton-state-color: cyan;

    --gm-neutraltextbutton-ink-color: cyan;
    --gm-neutraltextbutton-disabled-ink-color: cyan;
    --gm-neutraltextbutton-ink-color--stateful: cyan;
    --gm-neutraltextbutton-state-color: cyan;

    --gm-iconbutton-disabled-ink-color: rgba(var(--gm3-sys-color-on-surface-rgb), 0.5);

    --gm-radio-state-color: cyan;
    --gm-radio-stroke-color--unchecked: cyan;
    --gm-radio-stroke-color--checked: cyan;
    --gm-radio-ink-color: cyan;
    --gm-radio-disabled-stroke-color--unchecked: cyan;
    --gm-radio-disabled-stroke-color--checked: cyan;
    --gm-radio-disabled-ink-color: cyan;
    --gm-radio-stroke-color--unchecked-stateful: cyan;
    --gm-radio-stroke-color--checked-stateful: cyan;
    --gm-radio-ink-color--stateful: cyan;

    --gm-outlinedtextfield-ink-color: cyan;
    --gm-outlinedtextfield-caret-color: var(--gm3-sys-color-primary);
    --gm-outlinedtextfield-helper-text-color: cyan;
    --gm-outlinedtextfield-label-color: cyan;
    --gm-outlinedtextfield-outline-color: var(--gm3-sys-color-outline);
    --gm-outlinedtextfield-placeholder-color: var(--gm3-sys-color-outline);
    --gm-outlinedtextfield-prefix-color: cyan;
    --gm-outlinedtextfield-suffix-color: cyan;
    --gm-outlinedtextfield-ink-color--disabled: cyan;
    --gm-outlinedtextfield-outline-color--disabled: cyan;
    --gm-outlinedtextfield-label-color--disabled: cyan;
    --gm-outlinedtextfield-icon-color--disabled: cyan;
    --gm-outlinedtextfield-helper-text-color--disabled: cyan;
    --gm-outlinedtextfield-character-counter-color--disabled: cyan;
    --gm-outlinedtextfield-placeholder-color--disabled: cyan;
    --gm-outlinedtextfield-prefix-color--disabled: cyan;
    --gm-outlinedtextfield-suffix-color--disabled: cyan;
    --gm-outlinedtextfield-outline-color--stateful: var(--gm3-sys-color-on-surface);
    --gm-outlinedtextfield-label-color--stateful: var(--gm3-sys-color-on-surface);
    --gm-outlinedtextfield-caret-color--error: cyan;
    --gm-outlinedtextfield-helper-text-color--error: cyan;
    --gm-outlinedtextfield-outline-color--error: cyan;
    --gm-outlinedtextfield-icon-color--error: cyan;
    --gm-outlinedtextfield-outline-color--error-stateful: cyan;
    --gm-outlinedtextfield-label-color--error: cyan;
    
    --gm-chip-ink-color: cyan;
    --gm-chip-ink-color--stateful: cyan;
    --gm-chip-container-color: cyan;
    --gm-chip-outline-color--stateful: cyan;
    --gm-chip-state-color: cyan;
    --gm-chip-outline-color: cyan;

    --mdc-ripple-color: var(--gm3-sys-color-primary);
    
    // Header
    header {
      background: var(--gm3-sys-color-surface-container-low) !important;
      button, [role="button"] {
        --gm3-icon-button-standard-unselected-icon-color: initial;
        --gm3-icon-button-standard-unselected-hover-icon-color: initial;
        --gm3-icon-button-standard-unselected-focus-icon-color: initial;
        --gm3-icon-button-standard-unselected-pressed-icon-color: initial;
        svg {
          fill: var(--gm3-sys-color-on-surface) !important;
        }
      }
      input {
        color: var(--gm3-sys-color-on-surface);
      }
    }
    
    // Search bar
    .gb_Dd {
      background: var(--gm3-sys-color-surface-container);
      border: 1px solid transparent;
      // Listbox
      .VOEIyf .jBmls {
        border: 1px solid transparent;
        border-top-color: var(--gm3-sys-color-outline-variant);
        background-color: var(--gm3-sys-color-surface-container);
        color: var(--gm3-sys-color-on-surface);
        box-shadow: 0 8px 10px 1px rgba(var(--gm3-sys-shadow-rgb), .14),0 3px 14px 2px rgba(var(--gm3-sys-shadow-rgb),.12),0 5px 5px -3px rgba(var(--gm3-sys-shadow-rgb),.2);
        // List item 
        .oKubKe {
          color: inherit;
          &[aria-selected=true] {
            background-color: rgba(var(--gm3-sys-color-on-surface-rgb), 0.08);
          }
        }
      }
    }
    
    // Header icon
    [src="https://www.gstatic.com/images/branding/product/1x/contacts_2022_48dp.png"] + span {
      color: var(--gm3-sys-color-on-surface) !important;
    }
    
    // Header Google Workspace managed account pill
    .gb_Wa {
      background: transparent;
      border-color: var(--gm3-sys-color-outline);
      &:hover {
        background: rgba(var(--gm3-sys-color-on-surface-rgb), 0.08);
      }
      &:active {
        background: rgba(var(--gm3-sys-color-on-surface-rgb), 0.12);
      }
      &[aria-expanded="true"] {
        background: rgba(var(--gm3-sys-color-on-surface-rgb), 0.16);
      }
    }

    // Contacts selected bar
    .H1IxX {
      background-color: var(--gm3-sys-color-surface);
    }

    // Fast scroll letter display
    .wGD2Db {
      background: var(--gm3-sys-color-inverse-surface);
      color: var(--gm3-sys-color-inverse-on-surface);
    }
    
    // PFP edit button gap zone
    .jkrPQc {
      background-color: var(--gm3-sys-color-surface);
    }

    // "Outside working hours" badge
    .qbmD1c {
      // Intentionally set as mauve opposed to accent
      background-color: saturate(
        mix(@mauve, @mantle, 25%),
        20%
      );
      color: @mauve;
    }

    // In same Organization badge
    .uqcMFc.sRArlf::after {
      box-shadow: 0 1px 2px 0 rgba(var(--gm3-sys-color-shadow-rgb), .3),0 1px 3px 1px rgba(var(--gm3-sys-color-shadow-rgb), .15);
      color: var(--gm3-sys-color-on-primary);
      background-color: var(--gm3-sys-color-primary);
    }
    
    // Ink ripple
    .z80M1.qs41qe>.aBBjbd {
      background-image: radial-gradient(closest-side, rgba(var(--gm3-sys-color-on-surface-rgb), 0.16) max(100% - 70px, 65%), rgba(var(--gm3-sys-color-on-surface-rgb), 0) 100%);
    }

    // Contact card more actions menu
    .JPdR6b {
      box-shadow: 0px 8px 10px 1px rgba(var(--gm3-sys-color-shadow-rgb),.14),0px 3px 14px 2px rgba(var(--gm3-sys-color-shadow-rgb),.12),0px 5px 5px -3px rgba(var(--gm3-sys-color-shadow-rgb),.2);
      background-color: var(--gm3-sys-color-surface-container);
      // Contact card more actions menu item
      .z80M1 {
        color: var(--gm3-sys-color-on-surface);
        // Contact card more actions menu item icon
        .google-material-icons {
          color: inherit;
        }
        // Contact card more actions menu item hover
        &.FwR7Pc {
          background-color: rgba(var(--gm3-sys-color-on-surface-rgb), 0.08);
        }
        // Contact card more actions menu item selected
        &.N2RpBe::before {
          border-color: var(--gm3-sys-color-primary);
        }
      }
    }
    
    // Loader spinner
    .RiYDI {
      border-color: var(--gm3-sys-color-primary);
      border-right-color: transparent;
    }
    
    // Loader chromeAPI page progress bar
    .TRHLAc {
      background-color: var(--gm3-sys-color-primary) !important
    }
    
    // "Manage delegate access" Delegates header 
    .rnU4Pb,
    // "Manage delegate access" primary text
    .KI6D8e {
      color: var(--gm3-sys-color-on-surface);
    }
    // "Manage delegate access", search bar secondary text
    .mf6tRb, .waKsec {
      color: var(--gm3-sys-color-on-surface-variant);
    }
    // "Manage delegate access" divider
    .dPij6b {
      border-color: var(--gm3-sys-color-outline-variant);
    }
    
    // Legacy(M2) menu item text and icons
    .z80M1,
    .lueeKe.lueeKe,
    .s8kOBc .VfPpkd-StrnGf-rymPhb,
    .s8kOBc .VfPpkd-StrnGf-rymPhb .VfPpkd-StrnGf-rymPhb-ibnC6b-OWXEXe-gk6SMd,
    .s8kOBc .VfPpkd-StrnGf-rymPhb .VfPpkd-StrnGf-rymPhb-ibnC6b-OWXEXe-pXU01b,
    .s8kOBc
      .VfPpkd-StrnGf-rymPhb
      .VfPpkd-StrnGf-rymPhb-ibnC6b-OWXEXe-gk6SMd
      .VfPpkd-StrnGf-rymPhb-f7MjDc,
    .s8kOBc
      .VfPpkd-StrnGf-rymPhb
      .VfPpkd-StrnGf-rymPhb-ibnC6b-OWXEXe-pXU01b
      .VfPpkd-StrnGf-rymPhb-f7MjDc {
      color: var(--gm3-sys-color-on-surface);
    }

    // Legacy(M2) menu item selected
    .s8kOBc
      .VfPpkd-StrnGf-rymPhb
      .VfPpkd-StrnGf-rymPhb-ibnC6b.VfPpkd-StrnGf-rymPhb-ibnC6b-OWXEXe-gk6SMd {
      background-color: var(--gm3-sys-color-surface-variant);
    }
    
    // Legacy(M2) text field hover
    .cfWmIb:not(.VfPpkd-fmcmS-yrriRe-OWXEXe-OWB6Me):not(.VfPpkd-fmcmS-yrriRe-OWXEXe-XpnDCe):hover .VfPpkd-NSFCdd-i5vt6e .VfPpkd-NSFCdd-Brv4Fb, .cfWmIb:not(.VfPpkd-fmcmS-yrriRe-OWXEXe-OWB6Me):not(.VfPpkd-fmcmS-yrriRe-OWXEXe-XpnDCe):hover .VfPpkd-NSFCdd-i5vt6e .VfPpkd-NSFCdd-Ra9xwd, .cfWmIb:not(.VfPpkd-fmcmS-yrriRe-OWXEXe-OWB6Me):not(.VfPpkd-fmcmS-yrriRe-OWXEXe-XpnDCe):hover .VfPpkd-NSFCdd-i5vt6e .VfPpkd-NSFCdd-MpmGFe {
      border-color: var(--gm-outlinedtextfield-outline-color--stateful);
    }
    .cfWmIb:hover:not(.VfPpkd-fmcmS-yrriRe-OWXEXe-OWB6Me) .VfPpkd-NLUYnc-V67aGc {
      color: var(--gm-outlinedtextfield-label-color--stateful);
    }
    .j65wjf:not(.VfPpkd-fmcmS-yrriRe-OWXEXe-OWB6Me).VfPpkd-fmcmS-yrriRe-OWXEXe-XpnDCe .VfPpkd-NLUYnc-V67aGc, .j65wjf:not(.VfPpkd-fmcmS-yrriRe-OWXEXe-OWB6Me).VfPpkd-fmcmS-yrriRe-OWXEXe-XpnDCe .VfPpkd-NLUYnc-V67aGc-OWXEXe-TATcMc-KLRBe {
      color: var(--gm3-sys-color-primary,#0b57d0);
    }

    // Legacy tooltips, seen in header and certain M2 components
    .RM9ulf, .R8qYlc, .VfPpkd-z59Tgd {
      background-color: var(--gm3-sys-color-inverse-surface);
      color: var(
        --gm3-tooltip-plain-supporting-text-color,
        var(--gm3-sys-color-inverse-on-surface, #f2f2f2)
      );
    }

    // Companion panel lower bar divider
    .VKG8V {
      border-color: var(--gm3-sys-color-outline-variant)
    }
    
    // Companion panel loading screen blocker
    .w0Wlvf {
      background: var(--gm3-sys-color-surface);
    }
    
    // "Use the Contacts app" upsell
    .GENl2b {
      background-color: var(--gm3-sys-color-surface);
      box-shadow: 0 2px 4px 2px rgba(var(--gm3-sys-color-shadow-rgb),.3);
      & > div {
        color: inherit;
      }
    }
  }
}
