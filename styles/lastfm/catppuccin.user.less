/* ==UserStyle==
@name Last.fm Catppuccin
@namespace github.com/catppuccin/userstyles/styles/lastfm
@homepageURL https://github.com/catppuccin/userstyles/tree/main/styles/lastfm
@version 2025.12.27
@updateURL https://github.com/catppuccin/userstyles/raw/main/styles/lastfm/catppuccin.user.less
@supportURL https://github.com/catppuccin/userstyles/issues?q=is%3Aopen+is%3Aissue+label%3Alastfm
@description Soothing pastel theme for Last.fm
@author Catppuccin
@license MIT

@preprocessor less
@var select lightFlavor "Light Flavor" ["latte:Latte*", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha"]
@var select darkFlavor "Dark Flavor" ["latte:Latte", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha*"]
@var select accentColor "Accent" ["rosewater:Rosewater", "flamingo:Flamingo", "pink:Pink", "mauve:Mauve*", "red:Red", "maroon:Maroon", "peach:Peach", "yellow:Yellow", "green:Green", "teal:Teal", "blue:Blue", "sapphire:Sapphire", "sky:Sky", "lavender:Lavender", "subtext0:Gray"]
==/UserStyle== */

@import "https://userstyles.catppuccin.com/lib/lib.less";

@-moz-document domain("last.fm") {
  @media (prefers-color-scheme: light) {
    #catppuccin(@lightFlavor);
  }
  @media (prefers-color-scheme: dark) {
    #catppuccin(@darkFlavor);
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();

    html, html body {
      color: @text;
      background-color: @base;
    }

    /* Components */

    a, .mimic-link {
      color: @accent;
    }

    .btn-primary {
      background-color: @accent;
      color: @crust;

      &:hover {
        background-color: darken(@accent, 5%) !important;
        color: @crust !important;
      }
    }
    .btn-secondary {
      background-color: @surface0;
      color: @text;
    }
    .btn-cancel {
      color: @subtext1;
    }

    .dropdown-menu-clickable {
      background: @mantle;
      &::before {
        filter: @mantle-filter;
      }

      .dropdown-menu-clickable-item {
        color: @text;

        &:hover {
          background-color: @base !important;
        }

        &.dropdown-menu-clickable-item--selected {
          color: @accent;
        }
      }
    }
    .dropdown-menu-clickable-button {
      color: @subtext0;

      &:hover, &.disclose-active {
        color: @subtext1;
      }

      .section-with-settings &.section-control::before {
        border-right-color: @surface2;
      }

      &::after {
        filter: @subtext1-filter;
      }
    }

    .content-form {
      textarea, input, select {
        background-color: @mantle !important;
        color: @text !important;
        border-color: @surface1 !important;

        &:focus {
          box-shadow: 0 3px 9px 0 @surface0 !important;
        }
      }

      .lfm-form-radio input[type="radio"] {
        & + label::before {
          background-color: @base;
          border-color: @overlay1;
        }
        &:checked + label::before {
          box-shadow: inset 0 0 0 4px @accent;
          border-color: @accent;
        }
      }

      .form-row-help-text, .footnotes {
        color: @subtext0;
      }

      legend {
        color: @subtext1;
      }
    }

    // Alerts
    .alert-warning {
      background-color: fade(@peach, 30%);
      color: @peach;

      &::before {
        filter: @peach-filter;
      }
    }

    // Modals
    .modal-body {
      background: @mantle;
    }

    // Other

    .section-with-separator::after {
      background-color: @surface0;
    }

    .container {
      background: @base;
    }

    /* Footer */
    .footer {
      background: @mantle;
      color: @text;

      .footer-heading {
        color: @subtext0;
      }

      .footer-language {
        color: @subtext0;
        &.footer-language--active {
          color: @text;
        }
      }

      .footer-timezone {
        color: @subtext0;
        strong {
          color: @text;
        }
      }

      .footer-legal {
        color: @subtext1;
      }

      .container {
        background: none;
      }
    }

    /* Header */
    .top-bar {
      background: @mantle;

      svg {
        filter: @accent-filter;
      }
    }
    .masthead {
      .masthead-search-toggle {
        &::before {
          filter: @text-filter;
        }
        &::after {
          background-color: @text;
        }
      }
      .masthead-nav .masthead-nav-control {
        color: @text;

        &::after {
          background-color: @text;
        }
      }

      .auth-avatar-notification-count-badge {
        background: @accent;
      }
      .auth-dropdown-menu {
        background-color: @base;

        .auth-dropdown-profile {
          background-color: @mantle;

          .auth-dropdown-profile-info {
            .username {
              color: @text;
            }
            .scrobble-count {
              color: @subtext0;
            }
          }
        }
        .auth-dropdown-menu-links {
          background: @base;

          .auth-dropdown-menu-item .auth-dropdown-menu-link img {
            filter: @text-filter;
          }
        }
        .auth-dropdown-menu-footer {
          background: @base;

          .auth-upgrade-cta {
            background: @base;
            box-shadow: inset 0 0 0 1px @overlay0;
            color: @yellow;

            &:hover {
              box-shadow: inset 0 0 0 1px @yellow !important;
              color: @yellow !important;
            }
          }
          .auth-logout-cta {
            box-shadow: inset 0 0 0 1px @overlay0;
            background: @base;
            color: @text;
          }
        }
      }
    }

    .header {
      &.header--overview {
        color: @text;
      }
      &.header--overview .container, &.header--sub-page .container {
        background: none;
      }

      background: @base;

      .header-info {
        .header-title-secondary {
          .header-scrobble-since, .header-title-display-name {
            color: @subtext1;
          }
        }

        .header-info-secondary {
          color: @text;
        }
      }
    }
    .header-metadata .header-metadata-title {
      color: @subtext1;
    }
    .secondary-nav {
      .secondary-nav-item-link:hover::after,
      .secondary-nav-item-link--active::after {
        background: @accent;
      }
    }

    .chartlist {
      .chartlist-row {
        &:hover {
          background-color: @surface0;
        }

        &.chartlist-row--highlight, &.chartlist-row--now-scrobbling {
          background-color: fade(@accent, 20%);
        }

        .chartlist-play {
          .chartlist-play-button {
            &::before {
              background-color: transparent;
              filter: @text-filter;
              box-shadow: 0 0 0 1px fade(@mantle, 20%);
            }
          }
        }

        .chartlist-loved {
          button.chartlist-love-button {
            &::before {
              filter: @overlay2-filter;
            }
            &:hover::before, &[data-analytics-action="UnloveTrack"]::before {
              filter: @accent-filter;
            }
          }
        }

        .lazy-buylinks-toggle, .chartlist-more-button {
          &::before {
            filter: @overlay2-filter;
          }
          &:hover::before {
            filter: @subtext0-filter;
          }
        }
        .chartlist-more {
          .chartlist-more-menu {
            .more-item--track::before,
            .more-item--artist::before,
            .more-item--obsession::before {
              filter: @subtext0-filter;
            }
            .more-item--delete::before {
              filter: @red-filter;
            }
          }
        }

        .chartlist-timestamp {
          color: @subtext0;

          .chartlist-now-scrobbling::before {
            filter: @subtext0-filter;
          }
        }

        .chartlist-bar {
          .chartlist-count-bar-slug {
            background-color: transparent !important;
            background-image: linear-gradient(
              to right,
              fade(@accent, 20%),
              fade(@accent, 20%)
            );
            color: @crust;
          }
          .chartlist-count-bar-value {
            color: @text;
          }
        }
      }
      .chartlist-break::after, .chartlist-row::after {
        border-bottom-color: @surface1;
      }

      .cover-art {
        mix-blend-mode: screen;
        filter: invert(1);

        &::after {
          box-shadow: inset 0 0 0 1px fade(@subtext0, 7%);
        }
      }
    }
    #top-tracks {
      .section-settings-toggle::before,
      .share-chart .share-button-profile::before {
        filter: @subtext0-filter;
      }
    }

    /* Track Page */
    .catalogue-metadata .lyrics-snippet-more-link a::before,
    .more-link-fullwidth-right a::before,
    .more-items::before,
    .more-link a::before {
      filter: @accent-filter;
    }
    .more-items {
      color: @accent;
    }
    .catalogue-tags {
      .tag a, .tags-add, .tags-add-cta {
        color: @accent;
        box-shadow: inset 0 0 0 1px @accent;

        &:hover {
          color: darken(@accent, 5%) !important;
          box-shadow: inset 0 0 0 1px darken(@accent, 5%) !important;
        }
      }
      .tags-add::before {
        filter: @accent-filter;
      }
    }
    .source-album .source-album-stats,
    .about-artist .about-artist-listeners,
    .trending-tracks .trending-tracks-item-listeners,
    .catalogue-overview-similar-artists-item-aux-text {
      color: @subtext1;
    }

    .trending-tracks-section {
      &, .container {
        color: @text;
        background: @surface0;
      }
    }

    .stationlink-list .stationlink::after,
    .resource-external-link::after,
    .play-this-track-playlink::after {
      border-bottom-color: @surface1;
    }

    .shout-form {
      border-bottom-color: @surface0;
    }

    .video-preview-upload-cta {
      background: @surface0;
      box-shadow: 0 0 0 2px @surface1;

      &:hover {
        background: @surface1 !important;
      }

      &::before {
        filter: @text-filter;
      }
    }

    /* Settings */
    .main-content,
    .content-top-has-nav .content-top,
    .two-column-layout .content-top {
      background: @base;
    }
    .two-column-layout .container, .two-column-layout .main-content {
      background-image: none;
    }
    .content-top-has-nav .content-top::after,
    .two-column-layout .content-top::after {
      border-top-color: @surface1;
    }

    .change-username-upsell {
      background-color: fade(@yellow, 20%);
    }

    /* Inbox/Notifications */
    .inbox-notifications {
      .inbox-notifications__item--hover {
        box-shadow: inset 0 -1px @surface1;

        &:hover {
          background-color: @surface0 !important;
        }
      }
      .inbox-notifications__item--highlight-hover {
        background-color: @surface1;
      }
      .inbox-notifications__item-timestamp {
        color: @subtext0;
      }
    }
    .inbox .inbox-buttons .inbox-compose-button {
      background-color: @accent;
      color: @crust;

      &:hover {
        background-color: darken(@accent, 5%) !important;
        color: @crust !important;
      }
    }
  }
}
