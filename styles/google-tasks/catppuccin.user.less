/* ==UserStyle==
@name Google Tasks Catppuccin
@namespace github.com/catppuccin/userstyles/styles/google-tasks
@homepageURL https://github.com/catppuccin/userstyles/tree/main/styles/google-tasks
@version 2025.03.20
@updateURL https://github.com/catppuccin/userstyles/raw/main/styles/google-tasks/catppuccin.user.less
@supportURL https://github.com/catppuccin/userstyles/issues?q=is%3Aopen+is%3Aissue+label%3Agoogle-tasks
@description Soothing pastel theme for Google Tasks
@author Catppuccin
@license MIT

@preprocessor less
@var select lightFlavor "Light Flavor" ["latte:Latte*", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha"]
@var select darkFlavor "Dark Flavor" ["latte:Latte", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha*"]
@var select accentColor "Accent" ["rosewater:Rosewater", "flamingo:Flamingo", "pink:Pink", "mauve:Mauve*", "red:Red", "maroon:Maroon", "peach:Peach", "yellow:Yellow", "green:Green", "teal:Teal", "blue:Blue", "sapphire:Sapphire", "sky:Sky", "lavender:Lavender", "subtext0:Gray"]
==/UserStyle== */

@import "https://userstyles.catppuccin.com/lib/lib.less";

// @import "https://userstyles.catppuccin.com/lib/m3.less";
@import "https://github.com/catppuccin/userstyles/raw/refs/heads/feat/m3-lib/lib/m3.less";

@-moz-document domain("tasks.google.com") {
  .vWh0f:not(.PNKKi) {
    #catppuccin(@lightFlavor);
  }
  
  @media (prefers-color-scheme: dark) {
    .vWh0f.vWh0f {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();

    #__m3.base();
    #__m3.with-prefix(gm3-sys-color-);
    #__m3.with-prefix(tasks-);
    
    --gm2-primary-variant: var(--tasks-primary);
    --gm2-secondary-grey: var(--tasks-on-surface-variant);
    
    // Note: Radio ripple is unthemed...
    --select-selector-bg-color: red;
    --select-selector-border-color: var(--tasks-outline);
    
    --on-hover-background: rgba(var(--tasks-on-surface-rgb), 0.08);
    --on-hover-color-primary: cyan;
    
    --border-color: var(--tasks-outline);
    
    --elevation-1dp-color: var(--tasks-surface-container-lowest);
    --elevation-2dp-color: var(--tasks-surface-container-low);
    --elevation-3dp-color: var(--tasks-surface-container);
    --elevation-4dp-color: var(--tasks-surface-container-high);
    --elevation-5dp-color: var(--tasks-surface-container-highest);
    
    --gm2-shadow-elevation-1dp: 0 1px 2px 0 rgba(var(--tasks-shadow-rgb), 0.3), 0 1px 3px 1px rgba(var(--tasks-shadow-rgb), 0.15);
    --gm2-shadow-elevation-2dp: 0 1px 2px 0 rgba(var(--tasks-shadow-rgb), 0.3), 0 2px 6px 2px rgba(var(--tasks-shadow-rgb), 0.15);
    --gm2-shadow-elevation-3dp: 0 1px 3px 0 rgba(var(--tasks-shadow-rgb), 0.3), 0 4px 8px 3px rgba(var(--tasks-shadow-rgb), 0.15);
    --gm2-shadow-elevation-4dp: 0 2px 3px 0 rgba(var(--tasks-shadow-rgb), 0.3), 0 6px 10px 4px rgba(var(--tasks-shadow-rgb), 0.15);
    --gm2-shadow-elevation-5dp: 0 4px 4px 0 rgba(var(--tasks-shadow-rgb), 0.3), 0 8px 12px 6px rgba(var(--tasks-shadow-rgb), 0.15);
    
    --quantum-papermenu-menuitem-color: var(--tasks-on-surface);
    // Disabled state
    --quantum-papermenu-menuitem-disabled-color: rgba(var(--tasks-on-surface-rgb), 0.5);
    --quantum-papermenu-separator-border: 1px solid var(--tasks-outline-variant);
    // Hover state
    --quantum-item-highlighted-bg-color: rgba(var(--tasks-on-surface-rgb), 0.08);
    
    --collapsible-section-button-color: var(--tasks-outline);
    --action-menu-overflow-icon-color: rgb(154,160,166);
    --abstract-picker-el-label-color: rgb(128,134,139);
    --picker-disabled: rgb(154,160,166);
    
    --date-picker-current-month-text-color: var(--tasks-on-background);
    --date-picker-is-today-bg-color: rgba(var(--tasks-secondary-rgb), 0.24);
    --date-picker-is-today-text-color: var(--tasks-secondary);
    --date-picker-text-color: var(--tasks-on-background);
    --date-picker-is-disabled-text-color: var(--tasks-outline);
    --date-picker-bottom-border-color: var(--tasks-outline-variant);
    --date-chip-bg-color: var(--tasks-background);
    
    --tasks-today-chip: var(--tasks-secondary);
    
    --recurrence-picker-weekday-toggle-bg-color: rgb(60,64,67);
    --recurrence-picker-text-input-bg-color: transparent;
    
    --list-picker-option-is-selected-bg-color: var(--on-hover-background);
    
    --header-el-border-color: var(--tasks-outline);
    
    --drag-card-box-shadow: 0 1px 3px 0 rgba(var(--tasks-shadow-rgb), 0.6),0 4px 8px 3px rgba(var(--tasks-shadow-rgb),0.3);
    --drag-card-border-color: var(--elevation-3dp-color);
    --drag-card-title-color: var(--tasks-on-background);
    
    --space-tasks-task-item-hover-border-color: var(--elevation-1dp-color);
    --space-tasks-task-item-hover-box-shadow: 0 1px 2px 0 rgba(0,0,0,0.6),0 1px 3px 1px rgba(0,0,0,0.3);
    
    --task-item-dragging-handler-color: var(--tasks-on-surface-variant);
    
    --task-list-switcher-el-text-color: var(--tasks-on-background);
    --task-list-switcher-drag-indicator-color: var(--tasks-on-background);
    --task-list-switcher-clone-box-shadow: 0 1px 3px 0 rgba(0,0,0,0.6),0 4px 8px 3px rgba(0,0,0,0.3);
    --task-list-switcher-clone-bg-color: var(--elevation-3dp-color);
    --task-list-switcher-highlighted-item-bg-color: red;
    --task-list-switcher-button-color: var(--tasks-on-background);
    
    --assignee-chip-icon-color: var(--tasks-primary);
    --assignee-chip-highlighted-font-color: var(--tasks-primary);
    
    --hub-chip-hover-background: rgba(var(--tasks-on-surface-rgb), 0.08);
    --hub-chip-focus-background: rgba(var(--tasks-on-surface-rgb), 0.14);
    --hub-chip-active-background: rgba(var(--tasks-on-surface-rgb), 0.12);
    --hub-chip-hover-focus-background: rgba(var(--tasks-on-surface-rgb), 0.16);
  
    // TODO: Theme tasks-image-url-task-done-animation-@x

    // "List options" tooltip text
    .RM9ulf {
      color: var(--gm3-sys-color-inverse-on-surface);
    }
    // "List options" tooltip body
    .R8qYlc {
      background-color: var(--gm3-sys-color-inverse-surface);
    }

    // Header buttons
    header {
      button, [role="button"] {
        svg {
          fill: var(--gm3-sys-color-on-surface) !important;
        }
      }
    }
    
    // Tasks logo wordmark
    [src="https://fonts.gstatic.com/s/i/productlogos/tasks/v10/192px.svg"] {
      @logoBlue: @blue;
      @logoBlueDim: darken(@blue, 10%);

      @svg: escape('<svg xmlns="http://www.w3.org/2000/svg" height="192" viewBox="0 0 192 192" width="192"><path fill="none" d="M0 0h192v192H0z"/><path fill="@{logoBlueDim}" d="M147.34 34.66 134 42l-6.58 12.58L134 70l12.48 13.52L160 76l8.29-14.29L160 44z"/><path d="m95.78 86.22 31.64-31.64c9.32 7.08 16.17 17.23 19.06 28.94l-43.41 43.41c-3.91 3.91-10.24 3.91-14.14 0L59.66 97.66c-3.12-3.12-3.12-8.19 0-11.31l12.47-12.47c3.12-3.12 8.19-3.12 11.31 0zm86.56-49.88-12.69-12.69c-3.12-3.12-8.19-3.12-11.31 0l-11 11a80.3 80.3 0 0 1 20.95 27.05l14.05-14.05c3.13-3.12 3.13-8.18 0-11.31M148 96c0 28.72-23.28 52-52 52s-52-23.28-52-52 23.28-52 52-52c11.81 0 22.69 3.94 31.42 10.58l19.92-19.92C133.45 23.02 115.55 16 96 16c-44.18 0-80 35.82-80 80s35.82 80 80 80 80-35.82 80-80c0-12.27-2.77-23.9-7.71-34.29l-21.81 21.81c.99 4 1.52 8.18 1.52 12.48" fill="@{logoBlue}"/></svg>');
      content: url("data:image/svg+xml,@{svg}");

      // Dark theme slightly fades logo by default
      opacity: 1 !important;
      + span {
        color: var(--gm3-sys-color-on-surface) !important;
      }
    }
  }
}
