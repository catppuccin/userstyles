/* ==UserStyle==
@name Git SCM Catppuccin
@namespace github.com/catppuccin/userstyles/styles/git-scm
@homepageURL https://github.com/catppuccin/userstyles/tree/main/styles/git-scm
@version 2000.01.01
@updateURL https://github.com/catppuccin/userstyles/raw/main/styles/git-scm/catppuccin.user.less
@supportURL https://github.com/catppuccin/userstyles/issues?q=is%3Aopen+is%3Aissue+label%3Agit-scm
@description Soothing pastel theme for Git SCM
@author Catppuccin
@license MIT

@preprocessor less
@var select lightFlavor "Light Flavor" ["latte:Latte*", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha"]
@var select darkFlavor "Dark Flavor" ["latte:Latte", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha*"]
@var select accentColor "Accent" ["rosewater:Rosewater", "flamingo:Flamingo", "pink:Pink", "mauve:Mauve*", "red:Red", "maroon:Maroon", "peach:Peach", "yellow:Yellow", "green:Green", "teal:Teal", "blue:Blue", "sapphire:Sapphire", "sky:Sky", "lavender:Lavender", "subtext0:Gray"]
==/UserStyle== */

@import "https://userstyles.catppuccin.com/lib/lib.less";
@import url("https://python.catppuccin.com/pygments/catppuccin-variables.important.css");

@-moz-document domain("git-scm.com") {
  @media screen and (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]),
    :root[data-theme="dark"] {
      #catppuccin(@darkFlavor);
    }
  }

  @media screen and (prefers-color-scheme: light) {
    :root:not([data-theme="dark"]),
    :root[data-theme="light"] {
      #catppuccin(@lightFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    filter: none !important;

    img[alt="Git"] {
      filter: @accent-filter !important;
    }

    // :root[data-celebration="git-turns-20"] img[alt="Git"]
    &[data-celebration="git-turns-20"] img[alt="Git"] {
      filter: @peach-filter !important;
    }

    --orange: @accent;
    --orange-darker-5: darken(@accent, 5%);
    --blue: @blue;
    --font-color: @text;
    --aside-font-color: @subtext0;
    --light-font-color: @subtext0;
    --light-font-color-darker-10: darken(@subtext0, 10%);
    --light-font-color-darker-25: darken(@subtext0, 25%);
    --light-font-color-darker-35: darken(@subtext0, 35%);
    --light-font-color-darker-55: darken(@subtext0, 55%);
    --light-font-color-lighter-20: lighten(@subtext0, 20%);
    --link-color: @blue;
    --nav-link-color: @blue;
    --link-hover-color: @sky;
    --fixed-width-font-color: @text;
    --button-bg-color: linear-gradient(@surface0, darken(@surface0, 5%));
    --button-bg-hover-color: linear-gradient(
      @accent,
      darken(@accent, 5%)
    );
    --button-bg-selected-color: linear-gradient(
      darken(@accent, 5%),
      darken(@accent, 10%)
    );
    --button-color: @text;
    --button-border: @overlay0;
    --mark-bg-color: fade(@yellow, 30%);
    --mark-color: @yellow;
    --base-border-color: @overlay0;
    --base-border-color-darker-8: darken(@overlay0, 8%);
    --base-border-color-lighter-10: darken(@overlay0, 10%);
    --callout-color: @mantle;
    --highlight-bg-color: fade(@accent, 30%);
    --pre-bg-color: @mantle;
    --pre-border: @overlay0;
    --black-3: @crust;
    --main-bg: @base;
    --main-border: @overlay0;
    --title-border: @overlay1;
    --sidebar-bg-color: @mantle;
    --sidebar-toc-bg-color: @mantle;
    --bg-color: @base;
    --shadow-color: fade(@overlay0, 10%);
    --no-changes-bg-color: @mantle;
    --dropdown-active-bg-color: @surface0;
    --versions-footer-bg-color: @mantle;
    --search-border: @overlay0;
    --search-focus-border: @accent;
    --logos-1: @accent;
    --logos-2: darken(@accent, 5%);
    --logos-3: darken(@accent, 10%);
    --logos-4: darken(@accent, 15%);

    a:hover {
      color: var(--link-hover-color) !important;
    }

    button {
      border-color: var(--button-border) !important;
    }

    fieldset {
      border-color: var(--pre-border) !important;
    }

    #book-chapters,
    #reference-version,
    .section-nav-container {
      background-color: var(--sidebar-bg-color) !important;
    }

    .dropdown-panel {
      box-shadow: var(--shadow-color) !important;
    }

    table.benchmarks tr td.desc {
      color: var(--aside-font-color) !important;
    }

    abbr[title] {
      border-bottom-color: var(--title-border) !important;
    }

    table td.sweet {
      color: @green !important;
    }

    a.subtle-button {
      color: var(--font-color) !important;
      background-image: var(--button-bg-color) !important;
      border-color: var(--base-border-color) !important;
      box-shadow: var(--shadow-color) !important;

      &:hover {
        color: var(--bg-color) !important;
        background-image: var(--button-bg-hover-color) !important;
      }

      &.selected {
        color: var(--bg-color) !important;
        background-image: var(--button-bg-selected-color) !important;
      }
    }

    #search-results {
      background: var(--sidebar-bg-color) !important;
      border-color: var(--search-border) !important;
      box-shadow: var(--shadow-color) !important;

      header {
        background: var(--sidebar-bg-color) !important;
        border-color: var(--search-focus-border) !important;
      }

      table {
        td {
          border-color: var(--search-border) !important;

          &.category {
            background-color: var(--sidebar-bg-color) !important;
          }

          &.matches a {
            &.highlight, &:hover {
              color: var(--font-color) !important;
              text-shadow: var(--shadow-color) !important;
              background-color: var(--button-bg-hover-color) !important;
              background-image: unset !important;
            }
          }
        }
      }
    }

    #front-nav {
      a img {
        color: var(--font-color) !important;
        background-color: var(--button-bg-color) !important;

        &:hover {
          background-color: var(--button-bg-hover-color) !important;
        }

        &:active, &:focus {
          background-color: var(--button-bg-selected-color) !important;
        }
      }
    }

    #front-downloads {
      .downloads-box {
        outline: var(--base-border-color) !important;
      }

      #download-link {
        color: var(--bg-color) !important;
      }
    }

    .callout img {
      filter: @accent-filter !important;
    }

    aside.sidebar {
      #book-container,
      #logo-license,
      .bottom-nav,
      .callout {
        background-color: var(--callout-color) !important;
      }

      &.active {
        box-shadow: var(--shadow-color) !important;
        border-color: var(--base-border-color) !important;
      }
    }

    @media (max-width: 940px) {
      .sidebar-btn:focus + .sidebar,
      .sidebar:focus-within {
        border: var(--main-border) !important;
        box-shadow: var(--shadow-color) !important;
      }
    }

    .tooltip .tooltip-content {
      box-shadow: var(--shadow-color) !important;
    }

    #l10n-versions-dropdown footer a {
      color: var(--link-color) !important;

      &:hover {
        color: var(--link-hover-color) !important;
      }
    }

    ol.reference-previous-versions {
      border-color: var(--pre-border) !important;

      li a {
        border-color: var(--pre-border) !important;

        &:hover {
          background-color: var(--pre-bg-color) !important;
        }
      }
    }

    input.inactive {
      color: var(--light-font-color) !important;
    }

    form#search {
      @svg: escape(
          '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="none" stroke="@{subtext0}" stroke-linecap="round" stroke-linejoin="round" d="M12.5 6.5a6 6 0 01-6 6 6 6 0 01-6-6 6 6 0 016-6 6 6 0 016 6m3 9L11 11"/></svg>'
        )
        !important;
      color: var(--aside-font-color) !important;
      background-image: url("data:image/svg+xml,@{svg}") !important;

      &.focus {
        @svg: escape(
            '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="none" stroke="@{text}" stroke-linecap="round" stroke-linejoin="round" d="M12.5 6.5a6 6 0 01-6 6 6 6 0 01-6-6 6 6 0 016-6 6 6 0 016 6m3 9L11 11"/></svg>'
          )
          !important;
        color: var(--font-color) !important;
        background-image: url("data:image/svg+xml,@{svg}") !important;
      }

      box-shadow: var(--shadow-color) !important;
    }

    #documentation #main {
      p.nutshell, .literalblock .content pre tt {
        background-color: var(--pre-bg-color) !important;
      }
    }

    .switch a {
      color: var(--font-color) !important;
    }

    .edition2 {
      section[data-type="titlepage"] h1 {
        border-bottom: 1px solid #333 !important;
      }

      nav[data-type="toc"] li[data-type="part"] > a,
      table,
      th,
      figure img {
        border-color: var(--pre-border) !important;
      }

      aside {
        color: var(--aside-font-color) !important;
        background-color: var(--pre-bg-color) !important;
        border-color: var(--pre-border) !important;
      }

      div[data-type="note"],
      div[data-type="warning"] {
        border-color: var(--pre-border) !important;
      }

      div[data-type="note"] h1,
      div[data-type="warning"] h1 {
        color: @peach !important;
      }
    }

    .edition2 div[data-type="example"] h5 {
      border-bottom: 1px solid #d8d8d8 !important;
    }

    .edition2 div.navbar {
      background-color: #e8e8e8 !important;
      border-bottom: 1px solid #d8d8d8 !important;
    }

    .edition2 div.navbar h1 {
      color: #999 !important;
    }

    .edition2 div.navbar p a {
      color: #999 !important;
    }

    @media screen and (max-width: 480px) {
      .edition2 div.navbar {
        border-bottom: 2px solid #e8e8e8 !important;
        box-shadow: var(--shadow-color) !important;
      }
    }

    ul.books-list li img {
      border: solid 1px #b7b7b7 !important;
    }

    .bar-chart dd + dd {
      border-left: 1px solid #ccc !important;
    }

    .bar-chart progress.git::-moz-progress-bar,
    .bar-chart progress.git::-webkit-progress-value {
      background-color: #e09fa0 !important;
    }

    .bar-chart progress.svn::-moz-progress-bar,
    .bar-chart progress.svn::-webkit-progress-value {
      background-color: #e05f49 !important;
    }

    div#masthead {
      background: 0 0 !important;
    }

    div#masthead::before {
      content: "" !important;
      width: 100% !important;
      height: 295px !important;
      background: url("https://git-scm.com//images/bg/isometric-grid.png") 100%
        0 repeat !important;
      background-size: 35px 21px !important;
      position: absolute !important;
      filter: brightness(0.4)contrast(1.6) !important;
      z-index: -1 !important;
    }

    @media only screen and (min-device-pixel-ratio: 2),
      only screen and (min-device-pixel-ratio: 2),
      only screen and (min-device-pixel-ratio: 2/1) {
      div#masthead::before {
        background: url("https://git-scm.com//images/bg/isometric-grid@2x.png")
          100% 0 repeat !important;
        background-size: 35px 21px !important;
      }
    }

    hr.sidebar {
      filter: @overlay1-filter !important;
    }

    #documentation #main div.verseblock pre.content {
      color: var(--light-font-color) !important;
      background-color: var(--pre-bg-color) !important;
    }

    input.pagefind-ui__search-input {
      background: var(--main-bg) !important;
    }

    #l10n-versions-dropdown footer a {
      color: var(--link-color) !important;

      &:hover {
        color: var(--link-hover-color) !important;
      }
    }

    .diff {
      img[src="/images/icons/green-dot.png"] {
        filter: @green-filter !important;
      }

      img[src="/images/icons/red-dot.png"] {
        filter: @red-filter !important;
      }

      img[src="/images/icons/grey-dot.png"] {
        filter: @subtext0-filter !important;
      }
    }

    .cheat-sheet {
      .commit-reference dl dt::before {
        color: var(--font-color) !important;
      }

      img[src="/images/pdf.png"] {
        @svg: escape(
            '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="none" stroke="@{accent}" stroke-linecap="round" stroke-linejoin="round" d="M2.8 14.34c1.81-1.25 3.02-3.16 3.91-5.5.9-2.33 1.86-4.33 1.44-6.63-.06-.36-.57-.73-.83-.7-1.02.06-.95 1.21-.85 1.9.24 1.71 1.56 3.7 2.84 5.56 1.27 1.87 2.32 2.16 3.78 2.26.5.03 1.25-.14 1.37-.58.77-2.8-9.02-.54-12.28 2.08-.4.33-.86 1-.6 1.46.2.36.87.4 1.23.15h0Z" /></svg>'
          )
          !important;
        content: url("data:image/svg+xml,@{svg}") !important;
        filter: brightness(60%) !important;

        &:hover {
          filter: none !important;
        }
      }
    }

    img[src="/images/light-mode.svg"] {
      @svg: escape(
        '<svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg"><circle style="fill:none;stroke:@{accent};stroke-width:4" cx="25" cy="25" r="10"/><path style="fill:none;stroke:@{accent};stroke-width:4;stroke-linecap:round;stroke-linejoin:round" d="M25 5v5m0 35v-5m20-15h-5M5 25h5m29-14-3.5 3.5M11 39l3.5-3.5M39 39l-3.5-3.5M11 11l3.5 3.5"/></svg>'
      );
      content: url("data:image/svg+xml,@{svg}") !important;
      filter: none !important;
    }

    img[src="/images/dark-mode.svg"] {
      @svg: escape(
          '<svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg"><path style="fill:@{accent} !important;stroke-width:0" d="M34 9c3 0 13 13 4 25-11 14-30 3-24 2 6 0 11-5 14-8s6-9 5-17c0-1 0-2 1-2"/></svg>'
        )
        !important;
      content: url("data:image/svg+xml,@{svg}") !important;
      filter: none !important;
    }
  }
}
