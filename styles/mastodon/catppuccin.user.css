/* ==UserStyle==
@name           Mastodon Catppuccin
@namespace      github.com/catppuccin/userstyles/styles/mastodon
@homepageURL    https://github.com/catppuccin/userstyles/tree/main/styles/mastodon
@version        1.1.1
@description    Soothing pastel theme for Mastodon
@author         Catppuccin
@updateURL      https://github.com/catppuccin/userstyles/raw/main/mastodon/catppuccin.user.css
@preprocessor   less
@var select lightFlavour "Light Flavour" ["latte:Latte*", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha"]
@var select darkFlavour "Dark Flavour" ["latte:Latte", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha*"]
@var select accentColour  "Accent" ["rosewater:Rosewater", "flamingo:Flamingo", "pink:Pink", "mauve:Mauve", "red:Red", "maroon:Maroon", "peach:Peach", "yellow:Yellow", "green:Green", "teal:Teal", "blue:Blue", "sapphire:Sapphire*", "sky:Sky", "lavender:Lavender", "subtext0:Grey"]
==/UserStyle== */
@-moz-document domain("mstdn.social"),
domain("fosstodon.org"),
domain("tech.lgbt"),
domain("mastodon.social") {

    #catppuccin(@flavour) when (@flavour = latte) {
        @rosewater: hsl( 11, 59%, 67%);
        @flamingo: hsl( 0, 60%, 67%);
        @pink: hsl(316, 73%, 69%);
        @mauve: hsl(266, 85%, 58%);
        @red: hsl(347, 87%, 44%);
        @maroon: hsl(355, 76%, 59%);
        @peach: hsl( 22, 99%, 52%);
        @yellow: hsl( 35, 77%, 49%);
        @green: hsl(109, 58%, 40%);
        @teal: hsl(183, 74%, 35%);
        @sky: hsl(197, 97%, 46%);
        @sapphire: hsl(189, 70%, 42%);
        @blue: hsl(220, 91%, 54%);
        @lavender: hsl(231, 97%, 72%);
        @text: hsl(234, 16%, 35%);
        @subtext1: hsl(233, 13%, 41%);
        @subtext0: hsl(233, 10%, 47%);
        @overlay2: hsl(232, 10%, 53%);
        @overlay1: hsl(231, 10%, 59%);
        @overlay0: hsl(228, 11%, 65%);
        @surface2: hsl(227, 12%, 71%);
        @surface1: hsl(225, 14%, 77%);
        @surface0: hsl(223, 16%, 83%);
        @base: hsl(220, 23%, 95%);
        @mantle: hsl(220, 22%, 92%);
        @crust: hsl(220, 21%, 89%);
    }
    #catppuccin(@flavour) when (@flavour = frappe) {
        @rosewater: hsl( 10, 57%, 88%);
        @flamingo: hsl( 0, 59%, 84%);
        @pink: hsl(316, 73%, 84%);
        @mauve: hsl(277, 59%, 76%);
        @red: hsl(359, 68%, 71%);
        @maroon: hsl(358, 66%, 76%);
        @peach: hsl( 20, 79%, 70%);
        @yellow: hsl( 40, 62%, 73%);
        @green: hsl( 96, 44%, 68%);
        @teal: hsl(172, 39%, 65%);
        @sky: hsl(189, 48%, 73%);
        @sapphire: hsl(199, 55%, 69%);
        @blue: hsl(222, 74%, 74%);
        @lavender: hsl(239, 66%, 84%);
        @text: hsl(227, 70%, 87%);
        @subtext1: hsl(227, 44%, 80%);
        @subtext0: hsl(228, 29%, 73%);
        @overlay2: hsl(228, 22%, 66%);
        @overlay1: hsl(227, 17%, 58%);
        @overlay0: hsl(229, 13%, 52%);
        @surface2: hsl(228, 13%, 44%);
        @surface1: hsl(227, 15%, 37%);
        @surface0: hsl(230, 16%, 30%);
        @base: hsl(229, 19%, 23%);
        @mantle: hsl(231, 19%, 20%);
        @crust: hsl(229, 20%, 17%);
    }
    #catppuccin(@flavour) when (@flavour = macchiato) {
        @rosewater: hsl( 10, 58%, 90%);
        @flamingo: hsl( 0, 58%, 86%);
        @pink: hsl(316, 74%, 85%);
        @mauve: hsl(267, 83%, 80%);
        @red: hsl(351, 74%, 73%);
        @maroon: hsl(355, 71%, 77%);
        @peach: hsl( 21, 86%, 73%);
        @yellow: hsl( 40, 70%, 78%);
        @green: hsl(105, 48%, 72%);
        @teal: hsl(171, 47%, 69%);
        @sky: hsl(189, 59%, 73%);
        @sapphire: hsl(199, 66%, 69%);
        @blue: hsl(220, 83%, 75%);
        @lavender: hsl(234, 82%, 85%);
        @text: hsl(227, 68%, 88%);
        @subtext1: hsl(228, 39%, 80%);
        @subtext0: hsl(227, 27%, 72%);
        @overlay2: hsl(228, 20%, 65%);
        @overlay1: hsl(228, 15%, 57%);
        @overlay0: hsl(230, 12%, 49%);
        @surface2: hsl(230, 14%, 41%);
        @surface1: hsl(231, 16%, 34%);
        @surface0: hsl(230, 19%, 26%);
        @base: hsl(232, 23%, 18%);
        @mantle: hsl(233, 23%, 15%);
        @crust: hsl(236, 23%, 12%);
    }
    #catppuccin(@flavour) when (@flavour = mocha) {
        @rosewater: hsl( 10, 56%, 91%);
        @flamingo: hsl( 0, 59%, 88%);
        @pink: hsl(316, 72%, 86%);
        @mauve: hsl(267, 84%, 81%);
        @red: hsl(343, 81%, 75%);
        @maroon: hsl(350, 65%, 77%);
        @peach: hsl( 23, 92%, 75%);
        @yellow: hsl( 41, 86%, 83%);
        @green: hsl(115, 54%, 76%);
        @teal: hsl(170, 57%, 73%);
        @sky: hsl(189, 71%, 73%);
        @sapphire: hsl(199, 76%, 69%);
        @blue: hsl(217, 92%, 76%);
        @lavender: hsl(232, 97%, 85%);
        @text: hsl(226, 64%, 88%);
        @subtext1: hsl(227, 35%, 80%);
        @subtext0: hsl(228, 24%, 72%);
        @overlay2: hsl(228, 17%, 64%);
        @overlay1: hsl(230, 13%, 55%);
        @overlay0: hsl(231, 11%, 47%);
        @surface2: hsl(233, 12%, 39%);
        @surface1: hsl(234, 13%, 31%);
        @surface0: hsl(237, 16%, 23%);
        @base: hsl(240, 21%, 15%);
        @mantle: hsl(240, 21%, 12%);
        @crust: hsl(240, 23%, 9%);
    }

    /* ----- Accent Mixins ----- */
    #accent(@accent) when (@accent = rosewater) {
        @accent-colour: @rosewater;
    }
    #accent(@accent) when (@accent = flamingo) {
        @accent-colour: @flamingo;
    }
    #accent(@accent) when (@accent = pink) {
        @accent-colour: @pink;
    }
    #accent(@accent) when (@accent = mauve) {
        @accent-colour: @mauve;
    }
    #accent(@accent) when (@accent = red) {
        @accent-colour: @red;
    }
    #accent(@accent) when (@accent = maroon) {
        @accent-colour: @maroon;
    }
    #accent(@accent) when (@accent = peach) {
        @accent-colour: @peach;
    }
    #accent(@accent) when (@accent = yellow) {
        @accent-colour: @yellow;
    }
    #accent(@accent) when (@accent = green) {
        @accent-colour: @green;
    }
    #accent(@accent) when (@accent = teal) {
        @accent-colour: @teal;
    }
    #accent(@accent) when (@accent = blue) {
        @accent-colour: @blue;
    }
    #accent(@accent) when (@accent = sapphire) {
        @accent-colour: @sapphire;
    }
    #accent(@accent) when (@accent = sky) {
        @accent-colour: @sky;
    }
    #accent(@accent) when (@accent = lavender) {
        @accent-colour: @lavender;
    }
    #accent(@accent) when (@accent = subtext0) {
        @accent-colour: @subtext0;
    }

    :root:has(.theme-default-light) {
        #catppuccin(@lightFlavour);
        #accent(@accentColour);
        #mastodon();
    }
    
    :root:has(.theme-default) {
        #catppuccin(@darkFlavour);
        #accent(@accentColour);
        #mastodon();
    }
        
    #mastodon() {
        body,
        .tabs-bar__wrapper,
        .admin-wrapper .sidebar-wrapper__inner {
            background: @crust;
            color: @text;
        }


        .search-popout,
        .search-popout em,
        .dismissable-banner__message,
        .account__header__bio .account__header__fields dt,
        .account__section-headline a.active,
        .account__section-headline button.active,
        .notification__filter-bar a.active,
        .notification__filter-bar button.active,
        .account__header__bio .account__header__content,
        .navigation-bar,
        .column-link__badge,
        .column-subheading,
        .account__display-name strong,
        .status__display-name strong,
        .notification__message,
        .public-layout .public-account-bio .account__header__content,
        .reply-indicator__content,
        .status__content,
        .card__bar .display-name strong {
            color: @text;
        }


        .search-popout span,
        .link-footer p,
        .link-footer p a {
            color: @subtext1;
        }

        .account__header__tabs__name h1 small,
        .account__header__bio .account__header__fields dd,
        .display-name__account,
        .status__relative-time,
        .empty-column-indicator,
        .follow_requests-unlocked_explanation,
        .account .account__display-name,
        .label_input .search__input,
        .search__input:focus,
        .account__header__fields dt {
            color: @subtext0
        }

        .compose-panel hr,
        .navigation-panel hr {
            border-top-color: @subtext0
        }

        .trends__item,
        .status,
        .getting-started__trends h4,
        .trends__item__name span,
        .story {
            border-color: @subtext0
        }


        .account__header__tabs__name h1,
        .account__header__content a,
        .account__header__bio .account__header__fields a,
        .empty-column-indicator a,
        .follow_requests-unlocked_explanation a,
        .column-back-button,
        .icon-button,
        .icon-button.inverted,
        .text-icon-button,
        .icon-button.active,
        .public-layout .public-account-bio .account__header__fields a,
        .column-header__back-button,
        .notification__message .fa,
        .navigation-bar strong,
        .reply-indicator__content a.unhandled-link,
        .status__content a.unhandled-link {
            color: @accent-colour;
        }


        .icon-button:active,
        .icon-button:focus,
        .icon-button:hover,
        .text-icon-button:active,
        .text-icon-button:focus,
        .text-icon-button:hover,
        .icon-button.inverted:active,
        .icon-button.inverted:focus,
        .icon-button.inverted:hover,
        .public-layout .public-account-bio .account__header__fields a:hover {
            color: @accent-colour;
        }


        .ui__header,
        .column-header,
        .column-header__button,
        .column-header__back-button,
        .column-back-button,
        .drawer__header,
        .account__section-headline,
        .notification__filter-bar,
        .account__section-headline button,
        .notification__filter-bar button,
        .account__header,
        .search__input,
        .search__input:focus,
        .column-link__badge,
        .column-subheading,
        .public-layout .header,
        .public-layout .public-account-header__bar::before,
        .account__header__fields,
        .account__header__fields dt,
        .account__header__fields dd:not(.account__header__bio .account__header__fields dd),
        .focusable:focus,
        .admin-wrapper .sidebar ul .simple-navigation-active-leaf .selected {
            border-color: @mantle;
            background: @surface1;
        }

        .admin-wrapper .sidebar ul a:hover,
        .admin-wrapper .sidebar ul .simple-navigation-active-leaf a:hover {
            background: @surface0;
        }


        .dismissable-banner {
            border-color: @surface1;
            background: @base;
        }

        .theme-mastodon-light .account__header__bar,
        .theme-mastodon-light .column-header__back-button,
        .account__header__bio .account__header__fields dl,
        .account__header__bio .account__header__fields,
        .empty-column-indicator,
        .column > .scrollable,
        .nothing-here,
        .public-layout .public-account-bio,
        .hero-widget__text,
        body.admin,
        .admin-wrapper .sidebar ul a.selected,
        .admin-wrapper .sidebar ul ul {
            border-color: @mantle;
            background: @base;
        }


        .public-layout .public-account-header__tabs__tabs .counter::after {
            border-color: @accent-colour;
        }

        .public-layout .public-account-header__tabs__tabs .counter.active::after {
            border-color: @accent-colour;
        }

        .account,
        .load-gap {
            border-color: @mantle;
        }

        .account__section-headline a.active::after {
            border-color: transparent transparent @base;
        }

        .account__section-headline a.active::before,
        .account__section-headline button.active::after,
        .account__section-headline button.active::before,
        .notification__filter-bar a.active::after,
        .notification__filter-bar a.active::before,
        .notification__filter-bar button.active::after,
        .notification__filter-bar button.active::before {
            border-color: transparent transparent @mantle;
        }


        .search-popout,
        .drawer__header a:hover,
        .column-header__button:hover,
        .account__section-headline button:hover,
        .notification__filter-bar button:hover,
        .account__section-headline a:hover {
            background: @surface2;
        }

        .column-link .active,
        .column-link--transparent.active,
        .column-link--transparent:focus,
        .column-link:focus {
            color: @accent-colour;
        }

        .column-link--transparent:hover,
        .column-link:hover {
            color: @accent-colour;
        }

        .button.button-tertiary:focus,
        .button.button-tertiary:hover,
        .button.button-tertiary:active {
            color: @base;
        }

        .button.button-tertiary {
            border-color: @accent-colour;
        }

        .button,
        .button.button-tertiary,
        .button.logo-button {
            background: @accent-colour;
            color: @base;
        }

        .button.logo-button svg {
            fill: currentColor;
        }


        .public-layout .header .nav-button {
            background-color: @surface1;
        }

        .public-layout .header .nav-button:hover {
            background-color: @surface2;
        }

        .button.button-secondary:active,
        .button.button-secondary:focus,
        .button.button-secondary:hover {
            border-color: @accent-colour;
            color: @base;
            transition: .4s;
        }

        .button:active,
        .button:focus,
        .button:hover,
        .button.button-tertiary:active,
        .button.button-tertiary:focus,
        .button.button-tertiary:hover,
        .button.logo-button:active,
        .button.logo-button:focus,
        .button.logo-button:hover {
            background: @accent-colour;
        }

        .drawer__inner,
        .drawer__inner__mastodon {
            background-color: @base;
        }

        .compose-form .compose-form__modifiers,
        .compose-form .autosuggest-textarea__textarea,
        .compose-form .spoiler-input__input {
            background: @surface1;
            color: @text;
        }

        .compose-form .autosuggest-textarea__textarea::placeholder {
            color: @subtext0
        }

        .compose-form .compose-form__buttons-wrapper {
            background: @surface0;
        }

        .load-more:hover {
            background-color: @mantle;
        }

        .character-counter {
            color: @subtext0
        }

        .public-layout .header,
        .hero-widget,
        .public-layout .public-account-header,
        .public-layout .public-account-bio,
        .nothing-here {
            box-shadow: none;
        }

        .dropdown-menu__arrow:before,
        .dropdown-menu__item a,
        .dropdown-menu__item button,
        .dropdown-menu__container__list,
        .dropdown-menu.bottom {
            background: @surface0;
            color: @text;
        }

        .dropdown-menu__item a:hover,
        .dropdown-menu__item button:hover {
            background: @surface1;
        }

        .input-copy,
        .simple_form input[type=text],
        .simple_form textarea,
        .simple_form .block-button,
        .simple_form .button,
        .simple_form button {
            background: @mantle;
            color: @text;
        }

        .simple_form .block-button:hover,
        .simple_form .button:hover,
        .simple_form button:hover {
            background: @surface0;
        }

        .simple_form .input.with_label .label_input > label,
        .simple_form select,
        .accounts-table__count,
        .simple_form textarea {
            color: @text;
        }

        .simple_form textarea,
        .simple_form input[type=password],
        .simple_form input[type=number],
        .simple_form input[type=text] {
            border: 1px solid @crust;
        }

        .simple_form input[type=email]:required:valid {
            border: 1px solid @green
        }

        .simple_form input[type=password],
        .simple_form input[type=number],
        .simple_form input[type=email]:required:valid,
        .simple_form input[type=password]:required:invalid:not(:placeholder-shown) {
            color: @text;
            background: @mantle;
        }

        .simple_form input[type=password]:required:invalid:not(:placeholder-shown) {
            border: 1px solid @red;
        }

        .simple_form select {
            background: @mantle url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 14.933 18.467' height='19.698' width='15.929'><path d='M3.467 14.967l-3.393-3.5H14.86l-3.392 3.5c-1.866 1.925-3.666 3.5-4 3.5-.335 0-2.135-1.575-4-3.5zm.266-11.234L7.467 0 11.2 3.733l3.733 3.734H0l3.733-3.734z' fill='%2342485A'/></svg>") no-repeat right 8px center/auto 16px;
            border: 1px solid @crust;
        }

        .simple_form input[type=datetime-local]:active,
        .simple_form input[type=datetime-local]:focus,
        .simple_form input[type=email]:active,
        .simple_form input[type=email]:focus,
        .simple_form input[type=number]:active,
        .simple_form input[type=number]:focus,
        .simple_form input[type=password]:active,
        .simple_form input[type=password]:focus,
        .simple_form input[type=text]:active,
        .simple_form input[type=text]:focus,
        .simple_form input[type=url]:active,
        .simple_form input[type=url]:focus,
        .simple_form textarea:active,
        .simple_form textarea:focus {
            border-color: @accent-colour !important;
            background: @mantle !important;
            color: @text !important;
        }

        .table > thead > tr > th {
            border-color: @accent-colour !important;
        }

        .batch-table__toolbar,
        .table > thead > tr > th {
            background: @surface0 !important;
            color: @text !important;
        }

        .simple_form input[type=datetime-local]:hover,
        .simple_form input[type=email]:hover,
        .simple_form input[type=number]:hover,
        .simple_form input[type=password]:hover,
        .simple_form input[type=text]:hover,
        .simple_form input[type=url]:hover,
        .simple_form textarea:hover {
            background: @mantle !important;
            border-color: @accent-colour !important;
            transition: 0.4s;
        }

        .batch-table__row {
            background: @surface1;
        }

        .batch-table__row:hover,
        .batch-table__row:nth-child(2n):hover {
            background: @surface2;
        }

        .batch-table__row:nth-child(2n),
        .table > tbody > tr > td {
            background: @surface0;
        }

        .table > thead > tr > th {
            border-bottom: 2px solid @surface0;
        }

        .positive-hint {
            color: @green !important;
        }

        .card__bar {
            background: @surface0;
        }
    }
}
