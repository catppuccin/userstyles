/* ==UserStyle==
@name Arch Linux Catppuccin
@namespace github.com/catppuccin/userstyles/styles/arch-linux
@homepageURL https://github.com/catppuccin/userstyles/tree/main/styles/arch-linux
@version 2025.09.06
@updateURL https://github.com/catppuccin/userstyles/raw/main/styles/arch-linux/catppuccin.user.less
@supportURL https://github.com/catppuccin/userstyles/issues?q=is%3Aopen+is%3Aissue+label%3Aarch-linux
@description Soothing pastel theme for Arch Linux
@author Catppuccin
@license MIT

@preprocessor less
@var select lightFlavor "Light Flavor" ["latte:Latte*", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha"]
@var select darkFlavor "Dark Flavor" ["latte:Latte", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha*"]
@var select accentColor "Accent" ["rosewater:Rosewater", "flamingo:Flamingo", "pink:Pink", "mauve:Mauve*", "red:Red", "maroon:Maroon", "peach:Peach", "yellow:Yellow", "green:Green", "teal:Teal", "blue:Blue", "sapphire:Sapphire", "sky:Sky", "lavender:Lavender", "subtext0:Gray"]
==/UserStyle== */

@import "https://userstyles.catppuccin.com/lib/lib.less";
@import "http://127.0.0.1:8000/lib/mediawiki.less";

#mixins {
  .a() {
    a,
    a.permalink {
      &:link,
      &:enabled {
        color: @blue !important;

        &:hover {
          color: @sky !important;
        }

        &:active,
        &:focus-within {
          color: @sapphire !important;
        }

        &:visited {
          color: @lavender !important;
        }

        &.active {
          background-color: @surface0 !important;
        }
      }
    }

    ul li.isactive a {
      background-color: @accent !important;
      color: @base !important;
    }
  }

  .inputs() {
    button,
    ::file-selector-button,
    .rbox label,
    .text-button,
    input,
    select,
    select option,
    textarea {
      color: @text !important;
      background-color: @surface0 !important;
      border-color: @surface1 !important;

      &:enabled {
        color: @text !important;
        background-color: @surface0 !important;
        border-color: @surface1 !important;
      }

      &:hover {
        background-color: @surface1 !important;
        border-color: @surface2 !important;
      }

      &:active,
      &:focus-within {
        background-color: fade(@accent, 30%) !important;
      }

      &:checked {
        background-color: @accent !important;
        border-color: @overlay0 !important;
      }

      &:invalid,
      &:user-invalid {
        color: @red !important;
      }

      &:disabled {
        background-color: @crust !important;
        color: @mantle !important;
      }

      &:link,
      &:link:enabled {
        color: @blue !important;

        &:hover {
          color: @sky !important;
        }

        &:active,
        &:focus-within {
          color: @sapphire !important;
        }

        &:visited {
          color: @lavender !important;
        }
      }
    }

    .cdx-button:has(.mw-ui-icon-wikimedia-expand) {
      color: @text !important;
      background-color: transparent !important;
      border-color: transparent !important;

      &:enabled {
        color: @text !important;
        background-color: transparent !important;
        border-color: transparent !important;
      }

      &:hover {
        background-color: @surface1 !important;
      }

      &:active,
      &:focus-within {
        background-color: @surface2 !important;
      }

      &:invalid {
        color: @maroon !important;
      }
    }

    .cdx-button .mw-ui-icon-wikimedia-expand {
      fill: @accent !important;

      &:enabled {
        fill: @accent !important;
      }

      &:hover {
        fill: darken(@accent, 5%) !important;
      }

      &:active,
      &:focus-within {
        fill: darken(@accent, 10%) !important;
      }

      &:disabled {
        fill: @mantle !important;
      }
    }

    .cdx-icon svg,
    .skin-invert-image img,
    .skin-invert,
    .oo-ui-iconElement-icon:not(
      .oo-ui-image-progressive,
      .oo-ui-image-destructive,
      .oo-ui-checkboxInputWidget-checkIcon,
      .oo-ui-image-invert,
      .mw-no-invert
    ),
    .oo-ui-indicatorElement-indicator {
      filter: @subtext0-filter !important;

      &:enabled {
        filter: @subtext0-filter !important;
      }

      &:hover {
        filter: @text-filter !important;
      }

      &:active,
      &:focus-within {
        filter: @accent-filter !important;
      }

      &:disabled {
        filter: @mantle-filter !important;
      }
    }

    .mw-protection-indicator-icon--lock {
      background-color: @text !important;

      &:hover {
        background-color: @accent !important;
      }

      &:active,
      &:focus-within {
        background-color: darken(@accent, 5%) !important;
      }

      &:disabled {
        background-color: @mantle !important;
      }
    }

    .multiselect {
      color: @accent !important;
    }

    .checklist {
      color: @text !important;
      background-color: @surface0 !important;
      border-color: @surface1 !important;

      &:active, &:focus-within {
        border-color: @accent !important;
      }

      legend {
        color: @text !important;
      }
    }

    .rbox {
      border-color: @overlay0 !important;
      border-bottom-width: 2px;
      border-bottom-style: solid;

      label:last-child {
        border-bottom-style: none;
      }
    }
  }

  .table() {
    table {
      color: @text !important;
      background-color: @mantle !important;
      border-color: @overlay0 !important;

      tr {
        border-color: @overlay0 !important;

        &:nth-child(odd) td,
        .rowodd td {
          background-color: @surface0 !important;
        }

        &:nth-child(even) td,
        .roweven td {
          background-color: @base !important;
        }

        &:hover,
        &:hover td {
          background-color: @surface2 !important;
        }
      }

      td {
        border-color: @overlay0 !important;
      }

      th {
        background-color: @mantle !important;
        border-color: @overlay0 !important;
      }

      &.head tr {
        border-color: @overlay0 !important;
      }
    }
  }
}

// deno-fmt-ignore
@-moz-document regexp("^https:\\/\\/(?!gitlab\\.)(.+\\.)*archlinux\\.org(?:\\/.*)+") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    body, content {
      color: @text !important;
      background-color: @base !important;
    }

    code, pre, .codebox {
      color: @text !important;
      background-color: @mantle !important;
      border-color: @overlay0 !important;
    }

    label, legend, .spacer {
      color: @subtext0 !important;
    }

    h1, h2, h3, h4, h5 {
      border-color: @overlay1 !important;
    }

    img, p {
      color: @text !important;
    }

    #footer, .footer {
      color: @subtext0 !important;
    }

    .box, .path {
      background-color: @mantle !important;
      border-color: @overlay0 !important;
    }

    #mixins.a();

    blockquote, .quotebox {
      color: @text !important;
      border-color: @accent !important;
      border-style: none none none solid !important;
      background-color: @mantle !important;

      * {
        background-color: @mantle !important;
      }

      cite {
        color: @accent !important;
      }

      // This is necessary to fit style globally.
      p {
        margin-left: 10px;
      }

      &:hover,
      &:hover * {
        background-color: @surface1 !important;
      }
    }

    #mixins.table();

    dl {
      background-color: inherit !important;
      border-color: @overlay0 !important;

      dt {
        color: @text !important;
      }

      * {
        border-color: @overlay0 !important;
      }

      dd {
        color: inherit !important;

        &:nth-child(2n) {
          background-color: @surface0 !important;
        }

        &:nth-child(4n) {
          background-color: @base !important;
        }

        &:hover {
          background-color: @surface2 !important;
        }
      }
    }

    #mixins.inputs();

    .comments-header,
    #news {
      h3 {
        color: @base !important;
        background-color: transparent !important;
        border-color: @overlay1 !important;

        a {
          color: @base !important;
          background-color: @accent !important;
          border-color: @overlay1 !important;

          &:link, &:enabled {
            color: @base !important;
            background-color: @accent !important;
            border-color: @overlay1 !important;

            &:hover {
              color: darken(@base, 5%) !important;
            }

            &:active, &:focus-within {
              color: darken(@base, 10%) !important;
            }

            &:visited {
              color: @lavender !important;
            }
          }
        }

        span.text {
          color: @base !important;
          background-color: @accent !important;
          border-color: @overlay1 !important;
        }

        span.arrow {
          color: transparent !important;
          background-color: transparent !important;
          border-color: @accent transparent transparent transparent !important;
        }
      }

      h4 {
        color: @accent !important;

        a {
          color: @accent !important;

          &:link, &:enabled {
            color: @accent !important;

            &:hover {
              color: darken(@accent, 5%) !important;
            }

            &:active,
            &:focus-within {
              color: darken(@accent, 10%) !important;
            }

            &:visited {
              color: @lavender !important;
            }
          }
        }
      }
    }

    a.rss-icon, a.rss-icon img {
      filter: @peach-filter !important;

      &:link, &:enabled {
        filter: @peach-filter !important;
      }
    }

    // Dividers
    hr {
      color: @overlay1 !important;
    }

    // Unknown
    .purple {
      color: @mauve !important;
    }

    // Low
    .green {
      color: @green !important;
    }

    // Medium
    .light_orange {
      color: @yellow !important;
    }

    // High
    .orange {
      color: @peach !important;
    }

    // Vulnerable
    .red {
      color: @red !important;
    }

    .timestamp {
      color: @lavender !important;
    }

    .errorlist {
      color: @red !important;
    }

    #archnavbar {
      background-color: @mantle !important;
      border-bottom-color: @accent !important;

      #logo, &logo {
        @svg: escape('<svg xmlns="http://www.w3.org/2000/svg" version="1" width="600" height="126" viewBox="0 0 600 126"><path d="M159.568 34.427c-8.89-.014-16.267 1.809-19.12 2.803l-2.937 15.857c-.007.058 14.617-3.9 21.059-3.667 10.665.383 11.646 4.076 11.46 9.06.182.292-2.752-4.503-11.979-4.664-11.64-.2-28.069 4.122-28.046 21.692-.314 19.765 14.764 25.579 25.032 25.686 9.232-.168 13.563-3.496 15.934-5.28 3.115-3.257 6.679-6.532 10.078-10.462-3.216 5.844-6.005 9.884-8.907 12.977v2.611l14.033-2.361.096-38.144c-.143-5.399 3.096-26.057-26.703-26.108m-2.016 33.21c5.817.08 12.488 2.948 12.497 9.849.03 6.277-7.863 9.651-12.996 9.598-5.135-.053-11.949-4.036-11.979-10.155.099-5.47 6.426-9.432 12.478-9.291zm37.972-29.685-.095 63.166 16.348-3.15.027-35.814c.004-5.333 7.62-11.564 17.178-11.464 2.028-3.67 5.84-13.05 6.77-15.183-21.351-.051-21.623 6.137-25.336 9.18-.04-5.806-.013-9.292-.013-9.292zm92.002 8.292c-.158-.074-8.526-9.788-25.35-9.864-15.758-.262-33.433 5.847-33.716 32.27.138 23.232 16.979 32.311 33.805 32.488 18.007.187 25.172-11.26 25.602-11.543-2.149-1.863-10.196-9.837-10.196-9.837s-5.027 7.157-14.779 7.248c-9.755.093-18.234-7.54-18.354-18.189-.125-10.65 7.795-16.419 18.427-16.885 9.205-.002 14.516 5.943 14.516 5.943zm20.606-30.399-15.434 3.628.115 82.277 15.204-2.745.172-38.72c.033-4.06 5.874-10.295 15.626-10.097 9.325.097 11.41 6.215 11.384 6.988l.269 44.824 14.993-2.65.057-47.53c.099-4.574-10.018-14.233-26.28-14.302-7.729.012-12.009 1.762-14.187 3.052-3.726 2.879-7.985 5.637-12.17 9.157 3.869-4.97 7.117-8.407 10.29-10.961z" fill="@{text}" fill-rule="evenodd"/><path d="m360.136 17.218 6.962-1.742.33 82.95-7.074 1.204zm18.928 24.757 6.101-2.716.052 59.478-5.892 1.217zm-1.45-21.448 4.92-4.015 4.086 4.547-4.921 4.121zm19.024 20.365 6.962-1.421.033 12.434c.001.534 3.823-13.89 22.258-13.57 17.9.1 20.827 13.957 20.73 17.064l.221 43.725-6.102 1.324-.035-43.189c.07-1.261-2.79-11.927-15.439-11.966-12.646-.037-21.409 9.186-21.393 15.078l.1 38.047-7.07 1.847zm110.954 58.546-6.962 1.42-.033-12.433c-.001-.534-3.825 13.89-22.258 13.57-17.9-.1-20.827-13.957-20.73-17.064l-.221-43.725 7.397-1.494.114 43.19c.003 1.18 1.416 12.096 14.065 12.135 12.646.037 21.506-7.616 21.569-19.139l-.09-34.076 6.885-1.757zm13.645-59.037-4.882 3.82 18.717 24.494-19.963 28.3 5.179 3.843 18.766-26.28 19.368 26.902 4.791-3.82-20.757-28.765 16.56-23.262-5.092-4.305-15.085 21.525zM61.88 1.778c-5.385 13.203-8.633 21.839-14.629 34.649 3.676 3.896 8.188 8.434 15.516 13.559-7.878-3.242-13.252-6.497-17.267-9.874-7.673 16.011-19.695 38.818-44.09 82.65 19.174-11.068 34.037-17.893 47.889-20.497a35 35 0 0 1-.91-8.213l.023-.614c.304-12.284 6.694-21.73 14.264-21.09 7.57.642 13.454 11.126 13.15 23.41-.058 2.312-.319 4.536-.774 6.598 13.701 2.68 28.405 9.487 47.32 20.407-3.73-6.866-7.059-13.056-10.238-18.95-5.007-3.882-10.23-8.933-20.884-14.402 7.323 1.903 12.566 4.099 16.653 6.552C75.58 35.786 72.963 27.79 61.88 1.778" fill="@{accent}" fill-rule="evenodd"/><path d="M576.771 93.265V80.603h-4.73v-1.695h11.38v1.695h-4.75v12.662zm8.629 0V78.908h2.859l3.398 10.166q.47 1.42.686 2.125.245-.784.764-2.301l3.437-9.99h2.556v14.357h-1.831V81.25l-4.172 12.016h-1.714l-4.152-12.222v12.222h-1.832" font-weight="400" font-size="8.441" font-family="DejaVu Sans Mono" fill="@{subtext0}"/></svg>');
        background-image: url("data:image/svg+xml, @{svg}") !important;
        background-size: 190px 40px !important; // Required for AUR, which uses custom PNG which breaks this setting.
      }

      ul#archnavbarlist li {
        a, a:link {
          color: @text !important;

          &:hover {
            color: @sky !important;
          }

          &:active, &:focus-within {
            color: @sapphire !important;
          }

          &:visited {
            color: @lavender !important;
          }
        }

        &.anb-selected a {
          color: @accent !important;
        }
      }

      &.anb-home ul li#anb-home a {
        color: @accent !important;
      }
    }

    #archdev-navbar ul li {
      a, a:link {
        color: @text !important;

        &:hover {
          color: @sky !important;
        }

        &:active, &:focus-within {
          color: @sapphire !important;
        }

        &:visited {
          color: @lavender !important;
        }
      }
    }
  }
}

// Arch Official Repository
@-moz-document url-prefix("https://archlinux.org/packages") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #archnavbar ul#archnavbarlist li#anb-packages a {
      color: @accent !important;
    }
  }
}

// Arch User Repository
@-moz-document domain("aur.archlinux.org") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #archnavbar ul#archnavbarlist li#anb-aur a {
      color: @accent !important;
    }
  }
}

// AUR: Dashboard
@-moz-document url("https://aur.archlinux.org/") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #archdev-navbar ul li {
      a[href="/"] {
        color: @accent !important;
      }
    }
  }
}

// AUR: Packages
@-moz-document url-prefix("https://aur.archlinux.org/packages") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #archdev-navbar ul li {
      a[href="/packages"] {
        color: @accent !important;
      }
    }
  }
}

// AUR: Requests
@-moz-document url-prefix("https://aur.archlinux.org/requests") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #archdev-navbar ul li {
      a[href="/requests"] {
        color: @accent !important;
      }
    }
  }
}

// AUR: Requests
@-moz-document url-prefix("https://aur.archlinux.org/register") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #archdev-navbar ul li {
      a[href="/register"] {
        color: @accent !important;
      }
    }
  }
}

// AUR: Requests
@-moz-document url-prefix("https://aur.archlinux.org/login?next=/register") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #archdev-navbar ul li {
      a[href="/login?next=/register"] {
        color: @accent !important;
      }
    }
  }
}

// deno-fmt-ignore // AUR: My Account
@-moz-document regexp("https:\\/\\/aur\\.archlinux\\.org\\/accounts\\/.*\\/edit(?:\\/.*)?") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #archdev-navbar ul li {
      a[href="/packages"] {
        color: @accent !important;
      }
    }
  }
}

// Arch Security
@-moz-document url-prefix("https://security.archlinux.org/") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #archnavbar ul li#anb-security a {
      color: @accent !important;
    }

    .navbar ul li {
      a[href="/"], b {
        color: @accent !important;
      }
    }
  }
}

/// Other Specific Rules

// Home, and Both Package Repositories
@-moz-document url("https://archlinux.org/"),
  url-prefix("https://archlinux.org/packages"),
  domain("aur.archlinux.org") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #pkgdetails {
      h2 {
        border-color: @overlay1 !important;
      }

      #pkginfo,
      #pkginfo * {
        background-color: @mantle !important;
        border-color: @overlay0 !important;
      }

      #detailslinks > div {
        background-color: @surface0 !important;
        border-color: @overlay0 !important;
      }

      #metadata {
        h3 {
          color: @text !important;
          background-color: @surface0 !important;
        }

        #pkgfilelist {
          ul > li {
            &.d {
              color: @subtext0 !important;
            }

            &.f {
              color: @text !important;
            }
          }
        }
      }
    }

    .delete-comment,
    .undelete-comment,
    .edit-comment,
    .pin-comment {
      background-color: inherit !important;
      filter: @text-filter !important;

      &:hover {
        filter: @accent-filter !important;
      }
    }

    .comment-header {
      .edited {
        color: @subtext0 !important;
      }
    }

    .widget:is(
      #intro,
      #pkg-updates
    ) {
      background-color: @mantle !important;
      border-width: 1px !important;
      border-style: solid !important;
      border-color: @overlay0 !important;
    }

    #pkgsearch.widget {
      background-color: @accent !important;
      border-color: @overlay0 !important;

      label {
        color: @base !important;
      }

      .pkgsearch-typeahead {
        color: @text !important;
        background-color: @surface0 !important;
        border-color: @surface1 !important;
      }
    }

    .flagged,
    .flagged a {
      color: @red !important;
    }

    // Big syntax highlighting block! Powered by cgit and highlight.js.
    #cgit {
      code,
      pre {
        background-color: @mantle !important;
        border-color: @overlay0 !important;
      }

      .content {
        border-color: @overlay0 !important;
      }

      .path {
        color: @text !important;
        background-color: @mantle !important;
      }

      #mixins.table();

      table {
        &.blob {
          background-color: @mantle !important;
          border-color: @overlay0 !important;

          tr,
          tr td {
            background-color: @mantle !important;
            border-color: @overlay0 !important;

            &:hover {
              background-color: @mantle !important;
            }
          }

          td.linenumbers,
          td.linenumbers a {
            color: @overlay1 !important;
          }
        }

        &#header {
          tr,
          tr td {
            background-color: @base !important;
            border-color: @overlay0 !important;

            &:hover {
              background-color: @base !important;
            }

            &.sub {
              color: @subtext0 !important;
            }
          }
        }

        &.tabs {
          border-color: @blue !important;

          tr td {
            background-color: @surface0 !important;

            &:hover {
              background: @surface0 !important;
            }
          }

          .active {
            color: @base !important;
            background-color: @blue !important;
          }
        }

        &.hgraph,
        &.vgraph {
          background-color: @mantle !important;
        }

        &.diff {
          background-color: @mantle !important;

          &:hover {
            background-color: @mantle !important;
          }

          tr,
          tr td {
            background-color: @mantle !important;

            &:hover {
              background-color: @mantle !important;
            }
          }

          tr td {
            a {
              text-decoration: underline !important;
            }

            .ctx {
              color: @text !important;
            }

            .head {
              color: @blue !important;
            }

            .hunk {
              color: @peach !important;
            }

            .add {
              color: @green !important;
            }

            .del {
              color: @red !important;
            }
          }
        }

        &.ssdiff {
          a {
            text-decoration: underline !important;
          }

          .space {
            background-color: @base !important;
          }

          .lineno {
            color: @overlay1 !important;
          }

          .ctx {
            color: @text !important;
          }

          .head {
            color: @blue !important;
          }

          .hunk {
            color: @peach !important;
          }

          .changed {
            background-color: fade(@blue, 30%) !important;
            color: @blue !important;
          }

          .add {
            background-color: fade(@green, 30%) !important;
            color: @green !important;
          }

          .del {
            background-color: fade(@red, 30%) !important;
            color: @red !important;
          }
        }

        &.diffstat {
          background-color: @mantle !important;

          td {
            &.mode {
              color: @red !important;
            }

            &.right {
              color: @peach !important;
            }

            &.upd {
              color: @teal !important;
            }
          }

          td.graph td {
            &.add {
              background-color: fade(@green, 30%) !important;
            }

            &.upd {
              background-color: fade(@blue, 30%) !important;
            }

            &.rem {
              background-color: fade(@red, 30%) !important;
            }
          }
        }
      }

      .cgit-panel table {
        background-color: @mantle !important;
      }

      .edited {
        color: @subtext0 !important;
      }

      .stats tr td.sum {
        color: @red !important;
      }

      .age-mins,
      .age-hours,
      .age-days,
      .age-weeks,
      .age-months,
      .age-years {
        color: @green !important;
      }

      code {
        color: @text !important;

        /*****************************************************************
          These definitions come from highlight: http://www.andre-simon.de
          - std: standard / no recognition
          - str: string
          - num: number
          - slc: single line comment
          - com: multiline comment
          - esc: escape character
          - ppc: preprocessor
          - pps: preprocessor string
          - opt: operator
          - ipl: interpolation
          - ws:  whitespace
          - kwX: keyword group X (X: a..z)
        *****************************************************************/

        // Numerics
        .num {
          color: @peach !important;
        }

        // Escape Codes
        .esc {
          color: @pink !important;
        }

        // Strings
        .sng {
          color: @green !important;
        }

        // Pre-Processor Strings
        .pps {
          color: @maroon !important;
        }

        // All Other Pre-Processor
        .ppc {
          color: @teal !important;
        }

        // Single-Line Comments
        .slc {
          color: @overlay2 !important;
        }

        // All Other Comments
        .com {
          color: @overlay2 !important;
        }

        // Operators
        .opt {
          color: @sky !important;
        }

        // String Interpolation
        .ipl {
          color: @blue !important;
        }

        // Line Numbers
        .lin {
          color: @overlay1 !important;
        }

        // Keyword Group a - Keys?
        .kwa {
          color: @text !important;
        }

        // Keyword Group b - Parameters?
        .kwb {
          color: @blue !important;
        }

        // Keyword Group c - Commands
        .kwc {
          color: @mauve !important;
        }

        // Keyword Group d - Symbols
        .kwd {
          color: @maroon !important;
        }
      }

      .notes {
        color: @subtext0 !important;
        background-color: @surface0 !important;
      }
    }
  }
}

// Arch BBS Forums
@-moz-document domain("bbs.archlinux.org") {
  :root {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }

    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    .pun .postmsg,
    #punhelp code,
    #punhelp samp {
      color: @text !important;
    }

    .pun {
      color: @text !important;
      background-color: @mantle !important;
      border-color: @overlay0 !important;

      body,
      content {
        color: @text !important;
        background-color: @base !important;
      }

      code,
      pre,
      .codebox {
        background-color: @mantle !important;
        border-color: @overlay0 !important;
      }

      code {
        color: @text !important;
      }

      label,
      legend,
      .spacer {
        color: @subtext0 !important;
      }

      img {
        color: @text !important;
      }

      ins {
        color: @base !important;
        background-color: @yellow !important;
      }

      .box {
        background-color: @mantle !important;
        border-color: @overlay0 !important;
      }

      .punwrap {
        background-color: @base !important;
        border-color: @overlay0 !important;
      }

      #mixins.a();
      #mixins.inputs();

      h2 {
        color: @text !important;
        background-color: inherit !important;
      }

      #quickpost {
        .inform fieldset legend {
          color: @mantle !important;
        }
      }

      .infldset {
        background-color: @base !important;
        border-color: @overlay0 !important;
      }

      .timestamp {
        color: @lavender !important;
      }

      // Thread Tags: Sticky
      #vf td.tcl span.stickytext {
        color: @yellow !important;
      }

      // Thread Tags: Closed
      #vf td.tcl span.closedtext {
        color: @maroon !important;
      }

      // Forum Navigation Header
      .crumbs li * {
        color: @mauve !important;
      }

      // Thread Square
      .icon {
        filter: @accent-filter !important;
      }

      .pagelink.conl {
        color: @subtext0 !important;

        a,
        .spacer {
          border-color: transparent !important;

          strong {
            color: @accent !important;
          }
        }
      }

      fieldset p {
        color: @subtext0 !important;
      }

      .usercontent {
        color: @text !important;
      }

      #brdmenu {
        background-color: @base !important;
        border-color: transparent !important;

        ul li a {
          background-color: @base !important;
          border-color: transparent !important;
        }

        #mixins.a();
      }

      #brdfooternav {
        background-color: @base !important;
      }

      #brdstats {
        color: @text !important;
        border-top-color: @overlay1 !important;

        dl,
        dl dt,
        dl dd {
          color: @text !important;
          background-color: @base !important;
        }

        .box {
          background-color: @base !important;
        }
      }

      #brdwelcome {
        color: @subtext0 !important;
        background-color: @base !important;

        strong {
          color: @text !important;
        }
      }

      #brdmain {
        border-color: @overlay1 !important;

        #mixins.a();

        ul li {
          border-color: @overlay1 !important;

          a,
          a.permalink {
            &:link,
            &:enabled {
              color: @blue !important;
              background-color: @surface0 !important;

              &:hover {
                color: @sky !important;
                background-color: @surface1 !important;
              }

              &:active,
              &:focus-within {
                color: @base !important;
                background-color: @accent !important;
              }

              &:visited {
                color: @lavender !important;
              }

              &.active {
                color: @base !important;
                background-color: @accent !important;
              }
            }
          }

          &.isactive a,
          &.isactive a.permalink {
            background-color: @accent !important;
            color: @base !important;

            &:link,
            &:enabled,
            &.active {
              color: @base !important;
              background-color: @accent !important;

              &:hover {
                background-color: darken(@accent, 5%) !important;
              }

              &:active,
              &:focus-within {
                background-color: darken(@accent, 10%) !important;
              }
            }
          }
        }

        .postlink.conr {
          color: @lavender !important;
        }

        .postmsg {
          color: @text !important;
        }

        .blocktable {
          th {
            color: @text !important;
            background-color: @mantle !important;
          }
        }

        fieldset p {
          color: @subtext0 !important;
        }

        #users1 h2 {
          color: @text !important;
          background-color: @base !important;
          border-color: @overlay1 !important;
        }

        .pagelink {
          * {
            border-color: @overlay0 !important;
          }

          .pages-label {
            color: @subtext0 !important;
          }

          .spacer {
            color: @subtext0 !important;
          }

          strong {
            color: @accent !important;
          }
        }

        .blockpost {
          color: @text !important;
          background-color: @base !important;
          border-color: @overlay0 !important;

          dl,
          dl dt,
          dl dd {
            color: @text !important;
            background-color: @base !important;
          }

          .box {
            background-color: @base !important;
          }

          h2,
          .postleft dt,
          h2 .conr {
            color: @subtext0 !important;
            background-color: @mantle !important;
            border-color: @overlay1 !important;

            #mixins.a();

            a {
              background-color: @mantle !important;
            }
          }

          .postedit,
          .postleft dd :not(strong) {
            color: @subtext0 !important;
          }

          .postbody,
          .postfoot.clearb {
            background-color: @base !important;
            border-color: transparent !important;

            .postfootleft,
            .postfootright {
              color: @lavender !important;
              border-top-color: @overlay0 !important;
            }
          }

          .postsignature hr {
            background-color: @overlay1 !important;
          }
        }

        blockquote,
        .quotebox {
          color: @text !important;
          border-color: @accent !important;
          border-style: none none none solid !important;
          background-color: @mantle !important;

          * {
            background-color: @mantle !important;
          }

          cite {
            color: @accent !important;
          }

          // This is necessary to fit style globally.
          p {
            margin-left: 10px;
          }

          &:hover,
          &:hover * {
            background-color: @surface1 !important;
          }
        }

        // BBCode - styled according to "escpape sequences", as that is roughly what it is.
        .bbu {
          color: @pink !important;
        }

        .blockform {
          color: @text !important;
          border-color: @overlay1 !important;
        }
      }
    }
  }
}

// Arch Wiki
@-moz-document domain("wiki.archlinux.org") {
  :root.skin-theme-clientpref-os,
  .vector-feature-night-mode-enabled,
  .skin-invert,
  .notheme {
    @media (prefers-color-scheme: light) {
      #catppuccin(@lightFlavor);
    }
    @media (prefers-color-scheme: dark) {
      #catppuccin(@darkFlavor);
    }
  }

  :root.skin-theme-clientpref-night {
    #catppuccin(@darkFlavor);
  }

  :root.skin-theme-clientpref-day {
    #catppuccin(@lightFlavor);
  }

  #__mediawiki.reset();

  #catppuccin(@flavor) {
    #lib.palette();
    #lib.defaults();
    #lib.css-variables();

    #__mediawiki.base();

    dl dd:nth-child(n) {
      background-color: @base !important;

      &:hover {
        background-color: @base !important;
      }
    }

    h1, h2, h3, h4, h5 {
      &::before {
        color: @peach !important;
      }
    }

    /// Arch-Wiki Specific Variables

    // Defaults
    --archwiki-background-color-base: @crust !important;
    --archwiki-body-background-color: @mantle !important;
    --archwiki-text-color: @text !important;
    --archwiki-content-background-color: @base !important;
    --archwiki-content-border-color: @overlay0 !important;
    --archwiki-code-background-color: @mantle !important;
    --archwiki-code-border-color: @surface2 !important;
    --archwiki-link-color-normal: @blue !important;
    --archwiki-link-color-hover: @sky !important;
    --archwiki-link-color-active: @sapphire !important;
    --archwiki-link-color-visited: @lavender !important;
    --archwiki-link-color-new: @maroon !important;

    // Table of Contents - These do not work on V2022.
    /*
     * --archwiki-toc-background-color: inherit !important;
     * --archwiki-toc-border-color: var(--archwiki-toc-background-color) !important;
     */

    // Template Boxes (used for notes, warnings, tips and highlighted messages.)
    --archwiki-template-note-background-color: @surface0 !important;
    --archwiki-template-note-border-color: @peach !important;
    --archwiki-template-warning-background-color: @surface0 !important;
    --archwiki-template-warning-border-color: @red !important;
    --archwiki-template-tip-background-color: @surface0 !important;
    --archwiki-template-tip-border-color: @teal !important;

    // Navigation Bar (bottom of page, links to other articles within the group)
    --archwiki-template-navigation-background-color: @mantle !important;
    --archwiki-template-navigation-border-color: @overlay0 !important;

    // Editor-Specific Meta-related Notes
    --archwiki-template-highlight-background-color: @surface0 !important;
    --archwiki-template-highlight-border-color: @yellow !important;

    // All Other Meta-related Messages
    --archwiki-template-message-background-color: @surface0 !important;
    --archwiki-template-message-border-color: @blue !important;

    // Progress Bar
    --archwiki-template-progressbar-background-color: @mantle !important;
    --archwiki-template-progressbar-border-color: @surface0 !important;
    --archwiki-template-progressbar-inner-background-color: @accent !important;

    .archwiki-template-progressbar {
      color: @base !important;
      border-width: 1px;
    }

    // Tables
    --archwiki-table-cell-background-red: fade(@red, 30%) !important;
    --archwiki-table-cell-background-orange: fade(@peach, 30%) !important;
    --archwiki-table-cell-background-yellow: fade(@yellow, 30%) !important;
    --archwiki-table-cell-background-green: fade(@green, 30%) !important;
    --archwiki-table-cell-background-blue: fade(@blue, 30%) !important;
    --archwiki-table-cell-background-violet: fade(@mauve, 30%) !important;
    --archwiki-table-cell-background-grey: fade(@surface2, 30%) !important;

    // Related Articles
    .archwiki-template-meta-related-articles {
      background-color: @surface0 !important;

      > p {
        background-color: @mantle !important;
        border-bottom-color: @blue !important;
        color: @text !important;
      }
    }
  }
}
